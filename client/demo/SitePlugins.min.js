function Gui(e){this.container=e}function SitePlugins(e){this.gui=new Gui(e),this.sitePluginsStore=new SitePluginsStore(this.gui)}function SitePluginsStore(e){this.gui=e}Gui.prototype.prompt=function(e,t,n){"function"==typeof t&&(n=t,t="freepick"),n="function"==typeof n?n:function(){};var i=this.container.appendChild(document.createElement("div")),o=i.appendChild(document.createElement("div")),c=o.appendChild(document.createElement("span")),a=o.appendChild(document.createElement("div"));if(i.className="gui-prompt-container",o.className="gui-prompt-content",c.className="gui-prompt-question",a.className="gui-prompt-answers",c.appendChild(document.createTextNode(e)),"freepick"==t&&a.appendChild(this.createFreePick(e,function(e){n(e),this.container.removeChild(i)}.bind(this))),"object"==typeof t&&"number"==typeof t.length)for(var d=0;d<t.length;d++){var l=t[d].text||t[d];if("freepick"!=l){var r=a.appendChild(document.createElement("div"));if(r.className="gui-prompt-button gui-prompt-option-button","Cancel"==l&&(r.className+=" gui-prompt-option-cancel"),t[d].icon){var p=r.appendChild(document.createElement("img"));p.className="icon",p.src=t[d].icon,p.alt=l}var u=r.appendChild(document.createElement("div"));u.appendChild(document.createTextNode(l)),u.className="gui-prompt-button-text",r.addEventListener("click",function(e,t){this.container.removeChild(i),n(e)}.bind(this,l))}else a.appendChild(this.createFreePick(e,function(e){n(e),this.container.removeChild(i)}.bind(this)))}return i},Gui.prototype.createFreePick=function(e,t){var n=document.createElement("div"),i=n.appendChild(document.createElement("input"));i.className="gui-prompt-freepick-input",i.placeholder=e,i.addEventListener("keypress",function(e){13==e.keyCode&&t(i.value)});var o=n.appendChild(document.createElement("div"));return o.className="gui-prompt-button gui-prompt-freepick-button",o.appendChild(document.createTextNode("Submit")),o.addEventListener("click",function(e){t(i.value)}),n},Gui.prototype.makeDraggable=function(n,e){e||(e=n);var i=[],o=[],c=!1;function t(e){c=!0,i=[e.clientX||0,e.clientY||0],e.changedTouches&&e.changedTouches[0]&&(i=[e.changedTouches[0].clientX||0,e.changedTouches[0].clientY||0]);var t=n.getBoundingClientRect();o=[t.left,t.top],e.preventDefault()}function a(e){c&&(n.style.left=o[0]-i[0]+(e.clientX||e.changedTouches[0].clientX)+"px",n.style.top=o[1]-i[1]+(e.clientY||e.changedTouches[0].clientY)+"px",e.preventDefault())}e.addEventListener("mousedown",t),e.addEventListener("touchstart",t),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a),e.addEventListener("mouseup",function(e){c=!1}),e.addEventListener("touchend",function(e){c=!1})},Gui.prototype.createWindow=function(e){var t=this.container.appendChild(document.createElement("div"));t.className="gui-window";var n=t.appendChild(document.createElement("div"));n.className="titlecontainer",e.thinTitlebar&&n.classList.add("thin-titlebar");var i=n.appendChild(document.createElement("span"));if(i.className="title",i.appendChild(document.createTextNode(e.title||"window")),void 0===e.close||e.close){var o=n.appendChild(document.createElement("span"));o.appendChild(document.createTextNode("X")),o.className="close",o.addEventListener("click",function(){t.parentNode&&!e.isModal&&t.parentNode.removeChild(t),"function"==typeof e.onclose&&e.onclose(t)}),o.addEventListener("touchstart",function(){t.parentNode&&!e.isModal&&t.parentNode.removeChild(t),"function"==typeof e.onclose&&e.onclose(t)})}return this.makeDraggable(t,n),t},SitePlugins.prototype.setJWT=function(){},SitePlugins.prototype.openStore=function(){this.sitePluginsStore.openMainMenu()},SitePluginsStore.prototype.openMainMenu=function(){var e=this.gui.createWindow({title:"Plugin store",close:!0}).appendChild(document.createElement("div"));e.classList.add("content"),e.appendChild(document.createElement("h2")).appendChild(document.createTextNode("Pluginstore"));var t=e.appendChild(document.createElement("div"));t.classList="pluginstore-button",t.appendChild(document.createTextNode("List all plugins")),t.addEventListener("click",function(){this.openPluginList()}.bind(this))},SitePluginsStore.prototype.openPluginList=function(){var e=this.gui.createWindow({title:"Plugin list",close:!0}).appendChild(document.createElement("div"));e.classList.add("content"),e.appendChild(document.createElement("h2")).appendChild(document.createTextNode("Plugin list")),fetch("http://localhost:8755/plugins/list").then(function(e){return e.json()}).then(function(e){console.log(e)})};